import { useState, useEffect } from "react";
import { FooterStyle } from "./Style";
import FooterTitulo from "../FooterTitulo/FooterTitulo";

const Footer = () => {
    const [activeSection, setActiveSection] = useState("");

    const handleScrollTo = (e, sectionId) => {
        e.preventDefault();
        const element = document.getElementById(sectionId);

        if (element) {
            const offset = 80;
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - offset;

            window.scrollTo({
                top: offsetPosition,
                behavior: "smooth"
            });
        }
    };

    useEffect(() => {
        const handleScroll = () => {
            const sections = ["sobre", "produtos", "como-funciona", "por-que-nos"];
            const scrollPosition = window.scrollY + 150;

            for (const section of sections) {
                const element = document.getElementById(section);
                if (element) {
                    const offsetTop = element.offsetTop;
                    const offsetBottom = offsetTop + element.offsetHeight;

                    if (scrollPosition >= offsetTop && scrollPosition < offsetBottom) {
                        setActiveSection(section);
                        break;
                    }
                }
            }
        };

        window.addEventListener("scroll", handleScroll);
        return () => window.removeEventListener("scroll", handleScroll);
    }, []);

    const menuItems = [
        { label: "Sobre nós", id: "sobre" },
        { label: "Produtos", id: "produtos" },
        { label: "Como funciona", id: "como-funciona" },
        { label: "Por que nos escolher?", id: "por-que-nos" }
    ];

    return (
        <FooterStyle>
            <div className={"menu"}>
                <div className={"esquerda"}>
                    <FooterTitulo texto={"NAVEGAÇÃO"} />
                    <div className="menu-itens">
                        {menuItems.map((item) => (
                            <a
                                key={item.id}
                                href={`#${item.id}`}
                                onClick={(e) => handleScrollTo(e, item.id)}
                                className={activeSection === item.id ? "active" : ""}
                            >
                                {item.label}
                            </a>
                        ))}
                    </div>
                </div>
                <div className={"direita"}>
                    <FooterTitulo texto={"CONTATE-NOS"} />
                    <div className={"svgs"}>
                        <a href="https://www.instagram.com/new.pharmcompany" aria-label="Instagram">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path
                                    d="M16 12.6932C15.346 12.6932 14.7067 12.8871 14.1629 13.2504C13.6191 13.6138 13.1953 14.1302 12.945 14.7344C12.6948 15.3386 12.6293 16.0035 12.7569 16.6449C12.8844 17.2864 13.1994 17.8756 13.6618 18.338C14.1243 18.8004 14.7135 19.1154 15.3549 19.243C15.9963 19.3706 16.6612 19.3051 17.2654 19.0548C17.8696 18.8045 18.386 18.3807 18.7494 17.8369C19.1127 17.2931 19.3067 16.6538 19.3067 15.9998C19.3067 15.5656 19.2211 15.1356 19.055 14.7344C18.8888 14.3332 18.6452 13.9687 18.3382 13.6617C18.0311 13.3546 17.6666 13.111 17.2654 12.9449C16.8642 12.7787 16.4342 12.6932 16 12.6932ZM29.24 9.4265C29.233 8.39685 29.0434 7.3766 28.68 6.41317C28.4124 5.70818 27.9983 5.06796 27.4651 4.53475C26.9319 4.00154 26.2916 3.58746 25.5867 3.31984C24.6232 2.95646 23.603 2.76685 22.5733 2.75984C20.8533 2.6665 20.3467 2.6665 16 2.6665C11.6533 2.6665 11.1467 2.6665 9.42666 2.75984C8.397 2.76685 7.37675 2.95646 6.41332 3.31984C5.70834 3.58746 5.06811 4.00154 4.5349 4.53475C4.00169 5.06796 3.58761 5.70818 3.31999 6.41317C2.95661 7.3766 2.767 8.39685 2.75999 9.4265C2.66666 11.1465 2.66666 11.6532 2.66666 15.9998C2.66666 20.3465 2.66666 20.8532 2.75999 22.5732C2.77434 23.6064 2.96369 24.6298 3.31999 25.5998C3.58643 26.3016 4.00016 26.9381 4.53332 27.4665C5.06425 28.0029 5.70584 28.417 6.41332 28.6798C7.37675 29.0432 8.397 29.2328 9.42666 29.2398C11.1467 29.3332 11.6533 29.3332 16 29.3332C20.3467 29.3332 20.8533 29.3332 22.5733 29.2398C23.603 29.2328 24.6232 29.0432 25.5867 28.6798C26.2941 28.417 26.9357 28.0029 27.4667 27.4665C27.9998 26.9381 28.4136 26.3016 28.68 25.5998C29.043 24.6317 29.2326 23.6071 29.24 22.5732C29.3333 20.8532 29.3333 20.3465 29.3333 15.9998C29.3333 11.6532 29.3333 11.1465 29.24 9.4265ZM25.8533 20.0932C25.8105 20.916 25.6349 21.7264 25.3333 22.4932C25.0745 23.1327 24.6897 23.7138 24.2018 24.2016C23.7139 24.6895 23.1329 25.0743 22.4933 25.3332C21.7193 25.618 20.9043 25.7756 20.08 25.7998C19.0267 25.7998 18.7467 25.7998 16 25.7998C13.2533 25.7998 12.9733 25.7998 11.92 25.7998C11.0956 25.7756 10.2806 25.618 9.50666 25.3332C8.84546 25.0875 8.24836 24.6955 7.75999 24.1865C7.27688 23.7082 6.90378 23.1303 6.66666 22.4932C6.38073 21.72 6.22747 20.9041 6.21332 20.0798C6.21332 19.0265 6.21332 18.7465 6.21332 15.9998C6.21332 13.2532 6.21332 12.9732 6.21332 11.9198C6.22747 11.0956 6.38073 10.2797 6.66666 9.5065C6.91236 8.84531 7.30436 8.24821 7.81332 7.75984C8.29377 7.27934 8.87101 6.90663 9.50666 6.6665C10.2806 6.38171 11.0956 6.22412 11.92 6.19984C12.9733 6.19984 13.2533 6.19984 16 6.19984C18.7467 6.19984 19.0267 6.19984 20.08 6.19984C20.9043 6.22412 21.7193 6.38171 22.4933 6.6665C23.1545 6.91221 23.7516 7.3042 24.24 7.81317C24.7231 8.2915 25.0962 8.86935 25.3333 9.5065C25.6181 10.2805 25.7757 11.0955 25.8 11.9198C25.8 12.9732 25.8 13.2532 25.8 15.9998C25.8 18.7465 25.8933 19.0265 25.8533 20.0798V20.0932ZM23.72 10.1732C23.5612 9.74248 23.3109 9.35136 22.9864 9.02679C22.6618 8.70222 22.2707 8.45192 21.84 8.29317C21.2486 8.08818 20.6258 7.98889 20 7.99984C18.96 7.99984 18.6667 7.99984 16 7.99984C13.3333 7.99984 13.04 7.99984 12 7.99984C11.371 8.00598 10.7481 8.12335 10.16 8.3465C9.73589 8.49805 9.34891 8.73812 9.02477 9.05077C8.70062 9.36342 8.44674 9.74149 8.27999 10.1598C8.08636 10.7537 7.99176 11.3753 7.99999 11.9998C7.99999 13.0398 7.99999 13.3332 7.99999 15.9998C7.99999 18.6665 7.99999 18.9598 7.99999 19.9998C8.01321 20.6281 8.13035 21.2498 8.34666 21.8398C8.50541 22.2705 8.7557 22.6616 9.08027 22.9862C9.40485 23.3108 9.79597 23.5611 10.2267 23.7198C10.7955 23.9291 11.3942 24.0461 12 24.0665C13.04 24.0665 13.3333 24.0665 16 24.0665C18.6667 24.0665 18.96 24.0665 20 24.0665C20.629 24.0604 21.2519 23.943 21.84 23.7198C22.2707 23.5611 22.6618 23.3108 22.9864 22.9862C23.3109 22.6616 23.5612 22.2705 23.72 21.8398C23.9431 21.2517 24.0605 20.6288 24.0667 19.9998C24.0667 18.9598 24.0667 18.6665 24.0667 15.9998C24.0667 13.3332 24.0667 13.0398 24.0667 11.9998C24.067 11.3702 23.9495 10.7461 23.72 10.1598V10.1732ZM16 21.0932C15.3318 21.0932 14.6701 20.9613 14.0529 20.7052C13.4357 20.4491 12.8751 20.0737 12.4032 19.6006C11.9313 19.1274 11.5574 18.5658 11.3028 17.948C11.0483 17.3301 10.9182 16.6681 10.92 15.9998C10.92 14.9919 11.2191 14.0066 11.7793 13.1688C12.3396 12.3309 13.1358 11.6781 14.0673 11.2929C14.9987 10.9078 16.0235 10.8078 17.0119 11.0054C18.0003 11.203 18.9078 11.6894 19.6196 12.403C20.3314 13.1167 20.8154 14.0255 21.0104 15.0144C21.2054 16.0033 21.1027 17.0278 20.7151 17.9582C20.3276 18.8887 19.6727 19.6832 18.8333 20.2413C17.994 20.7993 17.0079 21.0958 16 21.0932ZM21.3333 11.9065C21.0386 11.8753 20.7658 11.7361 20.5676 11.5158C20.3693 11.2955 20.2596 11.0096 20.2596 10.7132C20.2596 10.4168 20.3693 10.1309 20.5676 9.91054C20.7658 9.69021 21.0386 9.55104 21.3333 9.51984C21.6281 9.55104 21.9008 9.69021 22.0991 9.91054C22.2973 10.1309 22.407 10.4168 22.407 10.7132C22.407 11.0096 22.2973 11.2955 22.0991 11.5158C21.9008 11.7361 21.6281 11.8753 21.3333 11.9065Z"
                                    fill="url(#paint0_linear_8_146)"
                                />
                                <defs>
                                    <linearGradient id="paint0_linear_8_146" x1="16" y1="2.6665" x2="16" y2="29.3332"
                                                    gradientUnits="userSpaceOnUse">
                                        <stop stopColor="#415AC5" />
                                        <stop offset="1" stopColor="#6846B8" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </a>
                        <a href="#" aria-label="WhatsApp">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path
                                    d="M29.3333 8.73317C29.3183 8.15793 29.2738 7.58384 29.2 7.01317C29.1004 6.51334 28.9345 6.02905 28.7067 5.57317C28.4683 5.07864 28.1483 4.62787 27.76 4.23984C27.3681 3.85611 26.9181 3.53662 26.4267 3.29317C25.9702 3.06976 25.4859 2.90834 24.9867 2.81317C24.4214 2.7285 23.8514 2.67952 23.28 2.6665H8.73332C8.15809 2.68149 7.584 2.72599 7.01332 2.79984C6.51349 2.8994 6.0292 3.06531 5.57332 3.29317C5.0788 3.53149 4.62803 3.85153 4.23999 4.23984C3.85626 4.63172 3.53678 5.0817 3.29332 5.57317C3.06992 6.02965 2.90849 6.51394 2.81332 7.01317C2.72866 7.57842 2.67967 8.14843 2.66666 8.71984C2.66666 8.97317 2.66666 9.33317 2.66666 9.43984V22.5598C2.66666 22.7065 2.66666 23.0265 2.66666 23.2665C2.68164 23.8417 2.72614 24.4158 2.79999 24.9865C2.89955 25.4863 3.06546 25.9706 3.29332 26.4265C3.53164 26.921 3.85169 27.3718 4.23999 27.7598C4.63187 28.1436 5.08185 28.463 5.57332 28.7065C6.02981 28.9299 6.51409 29.0913 7.01332 29.1865C7.57857 29.2712 8.14859 29.3202 8.71999 29.3332H23.2667C23.8419 29.3182 24.416 29.2737 24.9867 29.1998C25.4865 29.1003 25.9708 28.9344 26.4267 28.7065C26.9212 28.4682 27.372 28.1481 27.76 27.7598C28.1437 27.368 28.4632 26.918 28.7067 26.4265C28.9301 25.97 29.0915 25.4857 29.1867 24.9865C29.2713 24.4213 29.3203 23.8512 29.3333 23.2798C29.3333 23.0265 29.3333 22.7065 29.3333 22.5598V9.43984C29.3333 9.33317 29.3333 8.97317 29.3333 8.73317ZM16.3067 25.3332C14.7054 25.3253 13.1322 24.9125 11.7333 24.1332L6.66666 25.4665L7.99999 20.5065C7.14014 19.0618 6.67997 17.4144 6.66666 15.7332C6.67197 13.8437 7.23626 11.9981 8.28847 10.4288C9.34068 8.85944 10.8337 7.63654 12.5796 6.91412C14.3255 6.1917 16.2461 6.00206 18.0996 6.36909C19.953 6.73611 21.6564 7.64339 22.9952 8.97664C24.334 10.3099 25.2484 12.0095 25.6231 13.8614C25.9978 15.7133 25.8162 17.6347 25.101 19.3836C24.3859 21.1324 23.1692 22.6306 21.6043 23.6893C20.0393 24.748 18.196 25.32 16.3067 25.3332ZM16.3067 7.8265C14.8931 7.84268 13.509 8.23315 12.2954 8.95815C11.0818 9.68316 10.082 10.7168 9.39772 11.9539C8.71348 13.1909 8.36926 14.5872 8.4001 16.0005C8.43095 17.4139 8.83576 18.7938 9.57332 19.9998L9.75999 20.3065L8.95999 23.2265L12 22.3998L12.2933 22.5732C13.5061 23.2875 14.8859 23.6692 16.2933 23.6798C18.4151 23.6798 20.4499 22.837 21.9502 21.3367C23.4505 19.8364 24.2933 17.8016 24.2933 15.6798C24.2933 13.5581 23.4505 11.5233 21.9502 10.023C20.4499 8.52269 18.4151 7.67984 16.2933 7.67984L16.3067 7.8265ZM20.9733 19.1865C20.7987 19.4778 20.5649 19.7292 20.2869 19.9244C20.009 20.1196 19.6932 20.2543 19.36 20.3198C18.862 20.4109 18.3494 20.3788 17.8667 20.2265C17.4125 20.0845 16.9672 19.9153 16.5333 19.7198C14.885 18.8927 13.4792 17.6524 12.4533 16.1198C11.8958 15.4098 11.5576 14.5526 11.48 13.6532C11.472 13.2796 11.5427 12.9084 11.6874 12.5639C11.8321 12.2194 12.0477 11.9091 12.32 11.6532C12.4002 11.5622 12.4986 11.4891 12.6089 11.4386C12.7191 11.3881 12.8387 11.3612 12.96 11.3598H13.3333C13.48 11.3598 13.68 11.3598 13.8667 11.7732C14.0533 12.1865 14.5467 13.4265 14.6133 13.5465C14.6461 13.6105 14.6632 13.6813 14.6632 13.7532C14.6632 13.825 14.6461 13.8959 14.6133 13.9598C14.5544 14.1047 14.4734 14.2396 14.3733 14.3598C14.2533 14.5065 14.12 14.6798 14.0133 14.7865C13.9067 14.8932 13.7733 15.0265 13.9067 15.2665C14.2694 15.8788 14.7185 16.4356 15.24 16.9198C15.8079 17.4216 16.4572 17.823 17.16 18.1065C17.4 18.2265 17.5467 18.2132 17.68 18.1065C17.8133 17.9998 18.28 17.4132 18.44 17.1732C18.6 16.9332 18.76 16.9732 18.9733 17.0532C19.1867 17.1332 20.3733 17.7065 20.6133 17.8265C20.8533 17.9465 21 17.9998 21.0667 18.1065C21.1245 18.4555 21.0924 18.8134 20.9733 19.1465V19.1865Z"
                                    fill="url(#paint0_linear_9_150)"
                                />
                                <defs>
                                    <linearGradient id="paint0_linear_9_150" x1="16" y1="2.6665" x2="16" y2="29.3332"
                                                    gradientUnits="userSpaceOnUse">
                                        <stop stopColor="#415AC5" />
                                        <stop offset="1" stopColor="#6846B8" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </a>
                        <a href="#" aria-label="Email">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <g clipPath="url(#clip0_9_154)">
                                    <path
                                        d="M3.99999 4H28C28.3536 4 28.6927 4.14048 28.9428 4.39052C29.1928 4.64057 29.3333 4.97971 29.3333 5.33333V26.6667C29.3333 27.0203 29.1928 27.3594 28.9428 27.6095C28.6927 27.8595 28.3536 28 28 28H3.99999C3.64637 28 3.30723 27.8595 3.05718 27.6095C2.80713 27.3594 2.66666 27.0203 2.66666 26.6667V5.33333C2.66666 4.97971 2.80713 4.64057 3.05718 4.39052C3.30723 4.14048 3.64637 4 3.99999 4ZM16.08 15.5773L7.53066 8.31733L5.80399 10.3493L16.0973 19.0893L26.2053 10.3427L24.4613 8.32533L16.08 15.5773Z"
                                        fill="url(#paint0_linear_9_154)"
                                    />
                                </g>
                                <defs>
                                    <linearGradient id="paint0_linear_9_154" x1="16" y1="4" x2="16" y2="28"
                                                    gradientUnits="userSpaceOnUse">
                                        <stop stopColor="#415AC5" />
                                        <stop offset="1" stopColor="#6846B8" />
                                    </linearGradient>
                                    <clipPath id="clip0_9_154">
                                        <rect width="32" height="32" rx="16" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </a>
                    </div>
                    <FooterTitulo texto={"POLITICAS"} />
                    <div className="menu-itens">
                        <a href="#">Termos de uso</a>
                        <a href="#">Política de privacidade</a>
                    </div>
                </div>
            </div>
            <div className={"imagem"}>
                <img src="imagens/footer_img.png" alt={"Logo"} />
            </div>
        </FooterStyle>
    );
};

export default Footer;